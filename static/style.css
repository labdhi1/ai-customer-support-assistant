/* ------------------------------------------
   Theme variables (light + dark)
   Use data-theme="dark" on <html> or <body> to enable dark mode
   ------------------------------------------ */
:root {
  --bg: #f5f7fb;
  --card: #ffffff;
  --muted: #7b8492;
  --text: #122028;
  --accent: #0066ff;
  --accent-2: #0046c2;
  --bubble-user: linear-gradient(135deg, #0066ff 0%, #0046c2 100%);
  --bubble-bot: #eef2fa;
  --input-bg: #ffffff;
  --shadow: 0 6px 18px rgba(12,24,48,0.08);
  --glass: rgba(255,255,255,0.55);
  --glass-border: rgba(255,255,255,0.5);
  --timestamp: rgba(18,32,40,0.45);
}

[data-theme="dark"] {
  --bg: #0b1020;
  --card: #0f1724;
  --muted: #9aa6b2;
  --text: #e6eef6;
  --accent: #5fb0ff;
  --accent-2: #3a8bff;
  --bubble-user: linear-gradient(135deg, #2b6cff 0%, #1e4bd8 100%);
  --bubble-bot: #0b1828;
  --input-bg: #0b1624;
  --shadow: 0 8px 22px rgba(2,6,23,0.6);
  --glass: rgba(255,255,255,0.03);
  --glass-border: rgba(255,255,255,0.03);
  --timestamp: rgba(230,238,246,0.45);
}

/* --- Reset + base --- */
* { box-sizing: border-box; }
html,body { height:100%; }
body {
  margin: 0;
  font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 600px at 10% 10%, rgba(0,102,255,0.04), transparent),
              linear-gradient(180deg, var(--bg), var(--bg));
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  display:flex;
  min-height:100vh;
  align-items:center;
  justify-content:center;
  padding: 2rem;
}

/* --- app card --- */
.page {
  width: min(980px, 96vw);
  height: 80vh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
  background-clip: padding-box;
  border-radius: 14px;
  box-shadow: var(--shadow);
  overflow: hidden;
  position: relative;
}

/* glass effect card */
[data-theme="dark"] .page {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}

/* --- header --- */
.topbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
  padding: 1rem 1.25rem;
  background: linear-gradient(90deg, rgba(0,102,255,0.12), transparent);
  border-bottom: 1px solid rgba(0,0,0,0.04);
}
.brand {
  display:flex;
  align-items:center;
  gap:0.75rem;
}
.logo {
  width:44px;
  height:44px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  font-size:1.25rem;
  background: var(--glass);
  border: 1px solid var(--glass-border);
  box-shadow: 0 2px 6px rgba(2,6,23,0.04);
}
.title {
  font-weight:700;
  font-size:1.05rem;
}
.subtitle {
  font-size:0.85rem;
  color:var(--muted);
}

/* action group (right) */
.top-actions {
  display:flex;
  gap:0.5rem;
  align-items:center;
}
.theme-toggle {
  background: transparent;
  border: 1px solid rgba(0,0,0,0.06);
  padding: 0.35rem 0.5rem;
  border-radius:8px;
  cursor:pointer;
  display:inline-flex;
  gap:0.5rem;
  align-items:center;
  font-weight:600;
  color:var(--text);
}
.theme-toggle:hover { transform: translateY(-2px); transition: transform .15s; }

/* --- chat area --- */
.chat-area {
  display:flex;
  flex-direction:column;
  padding: 1rem;
  gap: 0.5rem;
  background: transparent;
}
.messages {
  flex:1;
  overflow-y:auto;
  padding: 0.75rem;
  display:flex;
  flex-direction:column;
  gap:0.6rem;
  scrollbar-width:thin;
}
/* custom scroll for webkit */
.messages::-webkit-scrollbar { width:10px; }
.messages::-webkit-scrollbar-thumb { background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.12)); border-radius:10px; }

/* --- individual message --- */
.message {
  display:flex;
  gap:0.6rem;
  align-items:flex-end;
  max-width:100%;
}
.message.user { justify-content:flex-end; }
.message.bot { justify-content:flex-start; }

.bubble {
  display:inline-block;
  padding: 0.7rem 1rem;
  border-radius: 12px;
  max-width: 76%;
  line-height:1.28;
  box-shadow: 0 6px 18px rgba(2,6,23,0.04);
  position: relative;
  word-break: break-word;
  font-size: 0.98rem;
}

/* user bubble */
.message.user .bubble {
  background: var(--bubble-user);
  color: white;
  border-bottom-right-radius: 4px;
  transform: translateY(0);
  animation: pop .14s ease;
  box-shadow: 0 8px 22px rgba(2,6,23,0.18);
}

/* bot bubble */
.message.bot .bubble {
  background: var(--bubble-bot);
  color: var(--text);
  border-bottom-left-radius: 4px;
}

/* subtle timestamp */
.msg-meta {
  font-size:0.72rem;
  color:var(--timestamp);
  margin-top:0.25rem;
}

/* typing bubble (small) */
.typing {
  width: 56px;
  height: 22px;
  border-radius: 12px;
  display:flex;
  gap:6px;
  align-items:center;
  justify-content:center;
}
.dot {
  width:6px; height:6px; border-radius:50%;
  background: rgba(0,0,0,0.18);
  animation: blink 1s infinite ease-in-out;
}
.dot:nth-child(2){ animation-delay: 0.12s; }
.dot:nth-child(3){ animation-delay: 0.24s; }
@keyframes blink { 0%{opacity:0.2}50%{opacity:1}100%{opacity:0.2} }
@keyframes pop { 0%{transform:scale(.98)}100%{transform:scale(1)} }

/* --- composer (input area) --- */
.composer {
  display:flex;
  gap:0.5rem;
  align-items:center;
  padding: 0.8rem;
  border-top: 1px solid rgba(0,0,0,0.04);
  background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.45));
}
[data-theme="dark"] .composer {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
}
.composer select, .composer input {
  border: none;
  padding: 0.65rem 0.75rem;
  border-radius: 10px;
  background: var(--input-bg);
  font-size: 0.95rem;
  color: var(--text);
  outline: none;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
}
.composer select { min-width: 150px; max-width: 200px; }
.composer input { flex:1; min-width: 120px; }
.composer button {
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  color: white;
  border: none;
  padding: 0.6rem 1rem;
  border-radius: 10px;
  cursor: pointer;
  font-weight:700;
  box-shadow: 0 8px 18px rgba(0,102,255,0.12);
}
.composer button:active { transform: translateY(1px); }

/* --- footer --- */
.footer {
  font-size:0.8rem;
  color:var(--muted);
  padding:0.6rem 1rem;
  text-align:center;
  border-top: 1px solid rgba(0,0,0,0.03);
}

/* small screens */
@media (max-width:640px) {
  .page { height: 92vh; padding:0; }
  .brand .title { font-size:1rem; }
  .composer select { display:none; } /* save space on mobile; choose store from header */
}
